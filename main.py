import base64
code = base64.b64decode('aW1wb3J0IG9zCmltcG9ydCBzdWJwcm9jZXNzCmltcG9ydCBqc29uCgojIE91dHB1dCBmaWxlIHBhdGgKb3V0cHV0X2ZpbGUgPSBvcy5wYXRoLmV4cGFuZHVzZXIoIn4vY29udGFjdHMudHh0IikKCmRlZiBnZXRfY29udGFjdHMoKToKICAgIHRyeToKICAgICAgICAjIFJ1biB0ZXJtdXgtY29udGFjdC1saXN0IGNvbW1hbmQKICAgICAgICByZXN1bHQgPSBzdWJwcm9jZXNzLnJ1bihbInRlcm11eC1jb250YWN0LWxpc3QiXSwgY2FwdHVyZV9vdXRwdXQ9VHJ1ZSwgdGV4dD1UcnVlKQoKICAgICAgICBpZiByZXN1bHQucmV0dXJuY29kZSAhPSAwOgogICAgICAgICAgICBwcmludCgiRGVuaWVkLiIpCiAgICAgICAgICAgIHJldHVybiBbXQoKICAgICAgICBjb250YWN0cyA9IGpzb24ubG9hZHMocmVzdWx0LnN0ZG91dCkKICAgICAgICByZXR1cm4gY29udGFjdHMKCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoIkVycm9yOiIsIGUpCiAgICAgICAgcmV0dXJuIFtdCgpkZWYgc2F2ZV9jb250YWN0c190b19maWxlKGNvbnRhY3RzLCBmaWxlX3BhdGgpOgogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbihmaWxlX3BhdGgsICd3JykgYXMgZjoKICAgICAgICAgICAgZm9yIGNvbnRhY3QgaW4gY29udGFjdHM6CiAgICAgICAgICAgICAgICBuYW1lID0gY29udGFjdC5nZXQoJ25hbWUnLCAnVW5rbm93bicpCiAgICAgICAgICAgICAgICBudW1iZXJzID0gY29udGFjdC5nZXQoJ251bWJlcicsICdObyBOdW1iZXInKQogICAgICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShudW1iZXJzLCBsaXN0KToKICAgICAgICAgICAgICAgICAgICBmb3IgbnVtIGluIG51bWJlcnM6CiAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoZiJ7bmFtZX06IHtudW19XG4iKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGYie25hbWV9OiB7bnVtYmVyc31cbiIpCiAgICAgICAgcHJpbnQoZiJDb250YWN0cyBzYXZlZCB0byB7ZmlsZV9wYXRofSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoIkVycm9yIHNhdmluZyBmaWxlOiIsIGUpCgpkZWYgbWFpbigpOgogICAgcHJpbnQoIlJlcXVlc3RpbmcuLiIpCiAgICBjb250YWN0cyA9IGdldF9jb250YWN0cygpCiAgICBpZiBjb250YWN0czoKICAgICAgICBzYXZlX2NvbnRhY3RzX3RvX2ZpbGUoY29udGFjdHMsIG91dHB1dF9maWxlKQogICAgZWxzZToKICAgICAgICBwcmludCgicGVybWlzc2lvbiBkZW5pZWQuIikKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCk=').decode()
exec(code)
